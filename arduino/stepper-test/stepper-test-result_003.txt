rpm = 360;
microsteps = 1;
degrees = 360;
stepper.begin(rpm, microsteps);
stepper.setSpeedProfile(stepper.LINEAR_SPEED, 1000, 1000);
degrees = stepper.calcStepsForRotation(degrees);
duration = 10;
stepper.startMove(degrees, duration);

21:48:17.472 ->   step=1.00  angle=2.00  dt=18027  rpm=21.26  state=1
21:48:17.565 ->   step=2.00  angle=3.00  dt=14004  rpm=25.13  state=1
21:48:17.612 ->   step=3.00  angle=4.00  dt=11838  rpm=28.48  state=1
21:48:17.659 ->   step=4.00  angle=5.00  dt=10429  rpm=31.48  state=1
21:48:17.705 ->   step=5.00  angle=6.00  dt=9430  rpm=34.22  state=1
21:48:17.752 ->   step=6.00  angle=7.00  dt=8664  rpm=36.75  state=1
21:48:17.798 ->   step=7.00  angle=8.00  dt=8059  rpm=39.12  state=1
21:48:17.890 ->   step=8.00  angle=9.00  dt=7568  rpm=41.36  state=1
21:48:17.936 ->   step=9.00  angle=10.00  dt=7154  rpm=43.48  state=1
21:48:18.030 ->   step=10.00  angle=11.00  dt=6796  rpm=45.50  state=1
21:48:18.030 ->   step=11.00  angle=12.00  dt=6493  rpm=47.44  state=1
21:48:18.123 ->   step=12.00  angle=13.00  dt=6220  rpm=49.30  state=1
21:48:18.169 ->   step=13.00  angle=14.00  dt=5981  rpm=51.09  state=1
21:48:18.260 ->   step=14.00  angle=15.00  dt=5772  rpm=52.82  state=1
21:48:18.260 ->   step=15.00  angle=16.00  dt=5576  rpm=54.50  state=1
21:48:18.352 ->   step=16.00  angle=17.00  dt=5405  rpm=56.13  state=1
21:48:18.400 ->   step=17.00  angle=18.00  dt=5241  rpm=57.71  state=1
21:48:18.481 ->   step=18.00  angle=19.00  dt=5098  rpm=59.25  state=1
21:48:18.528 ->   step=19.00  angle=20.00  dt=4959  rpm=60.75  state=1
21:48:18.575 ->   step=20.00  angle=21.00  dt=4838  rpm=62.21  state=1
21:48:18.622 ->   step=21.00  angle=22.00  dt=4722  rpm=63.64  state=1
21:48:18.714 ->   step=22.00  angle=23.00  dt=4614  rpm=65.05  state=1
21:48:18.761 ->   step=23.00  angle=24.00  dt=4508  rpm=66.42  state=1
21:48:18.808 ->   step=24.00  angle=25.00  dt=4417  rpm=67.75  state=1
21:48:18.854 ->   step=25.00  angle=26.00  dt=4328  rpm=69.08  state=1
21:48:18.947 ->   step=26.00  angle=27.00  dt=4243  rpm=70.37  state=1
21:48:18.992 ->   step=27.00  angle=28.00  dt=4163  rpm=71.65  state=1
21:48:19.038 ->   step=28.00  angle=29.00  dt=4087  rpm=72.90  state=1
21:48:19.084 ->   step=29.00  angle=30.00  dt=4015  rpm=74.13  state=1
21:48:19.177 ->   step=30.00  angle=31.00  dt=3947  rpm=75.32  state=1
21:48:19.222 ->   step=31.00  angle=32.00  dt=3879  rpm=76.51  state=1
21:48:19.268 ->   step=32.00  angle=33.00  dt=3821  rpm=77.68  state=1
21:48:19.315 ->   step=33.00  angle=34.00  dt=3762  rpm=78.82  state=1
21:48:19.408 ->   step=34.00  angle=35.00  dt=3706  rpm=79.96  state=1
21:48:19.453 ->   step=35.00  angle=36.00  dt=3652  rpm=81.08  state=1
21:48:19.500 ->   step=36.00  angle=37.00  dt=3600  rpm=82.19  state=1
21:48:19.592 ->   step=37.00  angle=38.00  dt=3550  rpm=83.29  state=1
21:48:19.639 ->   step=38.00  angle=39.00  dt=3502  rpm=84.36  state=1
21:48:19.686 ->   step=39.00  angle=40.00  dt=3456  rpm=85.42  state=1
21:48:19.732 ->   step=40.00  angle=41.00  dt=3412  rpm=86.46  state=1
21:48:19.827 ->   step=41.00  angle=42.00  dt=3370  rpm=87.49  state=1
21:48:19.874 ->   step=42.00  angle=43.00  dt=3329  rpm=88.52  state=1
21:48:19.921 ->   step=43.00  angle=44.00  dt=3289  rpm=89.53  state=1
21:48:19.964 ->   step=44.00  angle=45.00  dt=3251  rpm=90.53  state=1
21:48:20.043 ->   step=45.00  angle=46.00  dt=3214  rpm=91.52  state=1
21:48:20.089 ->   step=46.00  angle=47.00  dt=3178  rpm=92.48  state=1
21:48:20.136 ->   step=47.00  angle=48.00  dt=3144  rpm=93.43  state=1
21:48:20.224 ->   step=48.00  angle=49.00  dt=3111  rpm=94.40  state=1
21:48:20.264 ->   step=49.00  angle=50.00  dt=3078  rpm=95.36  state=1
21:48:20.357 ->   step=50.00  angle=51.00  dt=3046  rpm=96.28  state=1
21:48:20.357 ->   step=51.00  angle=52.00  dt=3012  rpm=97.21  state=1
21:48:20.448 ->   step=52.00  angle=53.00  dt=2986  rpm=98.14  state=1
21:48:20.494 ->   step=53.00  angle=54.00  dt=2957  rpm=99.04  state=1
21:48:20.586 ->   step=54.00  angle=55.00  dt=2929  rpm=99.97  state=1
21:48:20.586 ->   step=55.00  angle=56.00  dt=2901  rpm=100.87  state=1
21:48:20.680 ->   step=56.00  angle=57.00  dt=2874  rpm=101.76  state=1
21:48:20.714 ->   step=57.00  angle=58.00  dt=2848  rpm=102.63  state=1
21:48:20.807 ->   step=58.00  angle=59.00  dt=2823  rpm=103.48  state=1
21:48:20.853 ->   step=59.00  angle=60.00  dt=2799  rpm=104.35  state=1
21:48:20.899 ->   step=60.00  angle=61.00  dt=2767  rpm=105.19  state=1
21:48:20.946 ->   step=61.00  angle=62.00  dt=2752  rpm=106.04  state=1
21:48:21.037 ->   step=62.00  angle=63.00  dt=2729  rpm=106.88  state=1
21:48:21.084 ->   step=63.00  angle=64.00  dt=2707  rpm=107.72  state=1
21:48:21.129 ->   step=64.00  angle=65.00  dt=2685  rpm=108.54  state=1
21:48:21.221 ->   step=65.00  angle=66.00  dt=2664  rpm=109.37  state=1
21:48:21.269 ->   step=66.00  angle=67.00  dt=2643  rpm=110.17  state=1
21:48:21.316 ->   step=67.00  angle=68.00  dt=2623  rpm=110.99  state=1
21:48:21.362 ->   step=68.00  angle=69.00  dt=2603  rpm=111.77  state=1
21:48:21.454 ->   step=69.00  angle=70.00  dt=2576  rpm=112.57  state=1
21:48:21.497 ->   step=70.00  angle=71.00  dt=2565  rpm=113.38  state=1
21:48:21.588 ->   step=71.00  angle=72.00  dt=2546  rpm=114.16  state=1
21:48:21.634 ->   step=72.00  angle=73.00  dt=2528  rpm=114.94  state=1
21:48:21.681 ->   step=73.00  angle=74.00  dt=2510  rpm=115.70  state=1
21:48:21.727 ->   step=74.00  angle=75.00  dt=2493  rpm=116.46  state=1
21:48:21.819 ->   step=75.00  angle=76.00  dt=2476  rpm=117.23  state=1
21:48:21.865 ->   step=76.00  angle=77.00  dt=2459  rpm=117.97  state=1
21:48:21.912 ->   step=77.00  angle=78.00  dt=2443  rpm=118.76  state=1
21:48:21.946 ->   step=78.00  angle=79.00  dt=2418  rpm=119.52  state=1
21:48:22.026 ->   step=79.00  angle=80.00  dt=2410  rpm=120.29  state=1
21:48:22.118 ->   step=80.00  angle=81.00  dt=2394  rpm=121.02  state=1
21:48:22.166 ->   step=81.00  angle=82.00  dt=2379  rpm=121.75  state=1
21:48:22.212 ->   step=82.00  angle=83.00  dt=2364  rpm=122.50  state=1
21:48:22.259 ->   step=83.00  angle=84.00  dt=2349  rpm=123.20  state=1
21:48:22.351 ->   step=84.00  angle=85.00  dt=2335  rpm=123.92  state=1
21:48:22.398 ->   step=85.00  angle=86.00  dt=2321  rpm=124.64  state=1
21:48:22.445 ->   step=86.00  angle=87.00  dt=2307  rpm=125.37  state=1
21:48:22.492 ->   step=87.00  angle=88.00  dt=2293  rpm=126.10  state=1
21:48:22.584 ->   step=88.00  angle=89.00  dt=2279  rpm=126.80  state=1
21:48:22.631 ->   step=89.00  angle=90.00  dt=2266  rpm=127.50  state=1
21:48:22.679 ->   step=90.00  angle=91.00  dt=2253  rpm=128.21  state=1
21:48:22.723 ->   step=91.00  angle=92.00  dt=2240  rpm=128.87  state=1
21:48:22.816 ->   step=92.00  angle=93.00  dt=2228  rpm=129.59  state=1
21:48:22.863 ->   step=93.00  angle=94.00  dt=2215  rpm=130.26  state=1
21:48:22.909 ->   step=94.00  angle=95.00  dt=2203  rpm=130.95  state=1
21:48:23.001 ->   step=95.00  angle=96.00  dt=2191  rpm=131.64  state=1
21:48:23.047 ->   step=96.00  angle=97.00  dt=2175  rpm=132.28  state=1
21:48:23.094 ->   step=97.00  angle=98.00  dt=2164  rpm=132.98  state=1
21:48:23.178 ->   step=98.00  angle=99.00  dt=2156  rpm=133.63  state=1



21:48:23.225 ->   step=99.00  angle=100.00  dt=2137  rpm=132.98  state=3
21:48:23.317 ->   step=100.00  angle=101.00  dt=2152  rpm=132.28  state=3
21:48:23.317 ->   step=101.00  angle=102.00  dt=2164  rpm=131.58  state=3
21:48:23.410 ->   step=102.00  angle=103.00  dt=2176  rpm=130.95  state=3
21:48:23.457 ->   step=103.00  angle=104.00  dt=2187  rpm=130.26  state=3
21:48:23.545 ->   step=104.00  angle=105.00  dt=2195  rpm=129.53  state=3
21:48:23.592 ->   step=105.00  angle=106.00  dt=2212  rpm=128.87  state=3
21:48:23.685 ->   step=106.00  angle=107.00  dt=2220  rpm=128.15  state=3
21:48:23.685 ->   step=107.00  angle=108.00  dt=2237  rpm=127.44  state=3
21:48:23.778 ->   step=108.00  angle=109.00  dt=2242  rpm=126.74  state=3
21:48:23.824 ->   step=109.00  angle=110.00  dt=2255  rpm=126.05  state=3
21:48:23.917 ->   step=110.00  angle=111.00  dt=2276  rpm=125.37  state=3
21:48:23.962 ->   step=111.00  angle=112.00  dt=2289  rpm=124.64  state=3
21:48:24.008 ->   step=112.00  angle=113.00  dt=2303  rpm=123.92  state=3
21:48:24.054 ->   step=113.00  angle=114.00  dt=2313  rpm=123.20  state=3
21:48:24.147 ->   step=114.00  angle=115.00  dt=2327  rpm=122.45  state=3
21:48:24.195 ->   step=115.00  angle=116.00  dt=2342  rpm=121.75  state=3
21:48:24.242 ->   step=116.00  angle=117.00  dt=2356  rpm=121.02  state=3
21:48:24.335 ->   step=117.00  angle=118.00  dt=2375  rpm=120.24  state=3
21:48:24.380 ->   step=118.00  angle=119.00  dt=2387  rpm=119.52  state=3
21:48:24.474 ->   step=119.00  angle=120.00  dt=2406  rpm=118.76  state=3
21:48:24.474 ->   step=120.00  angle=121.00  dt=2422  rpm=118.02  state=3
21:48:24.566 ->   step=121.00  angle=122.00  dt=2434  rpm=117.23  state=3
21:48:24.612 ->   step=122.00  angle=123.00  dt=2455  rpm=116.50  state=3
21:48:24.705 ->   step=123.00  angle=124.00  dt=2471  rpm=115.74  state=3
21:48:24.751 ->   step=124.00  angle=125.00  dt=2488  rpm=114.99  state=3
21:48:24.845 ->   step=125.00  angle=126.00  dt=2505  rpm=114.20  state=3
21:48:24.845 ->   step=126.00  angle=127.00  dt=2523  rpm=113.42  state=3
21:48:24.937 ->   step=127.00  angle=128.00  dt=2537  rpm=112.61  state=3
21:48:24.983 ->   step=128.00  angle=129.00  dt=2560  rpm=111.86  state=3
21:48:25.078 ->   step=129.00  angle=130.00  dt=2578  rpm=111.07  state=3
21:48:25.124 ->   step=130.00  angle=131.00  dt=2597  rpm=110.25  state=3
21:48:25.217 ->   step=131.00  angle=132.00  dt=2617  rpm=109.45  state=3
21:48:25.264 ->   step=132.00  angle=133.00  dt=2637  rpm=108.62  state=3
21:48:25.311 ->   step=133.00  angle=134.00  dt=2654  rpm=107.80  state=3
21:48:25.356 ->   step=134.00  angle=135.00  dt=2671  rpm=106.99  state=3
21:48:25.441 ->   step=135.00  angle=136.00  dt=2700  rpm=106.16  state=3
21:48:25.488 ->   step=136.00  angle=137.00  dt=2722  rpm=105.34  state=3
21:48:25.578 ->   step=137.00  angle=138.00  dt=2744  rpm=104.49  state=3
21:48:25.625 ->   step=138.00  angle=139.00  dt=2763  rpm=103.66  state=3
21:48:25.671 ->   step=139.00  angle=140.00  dt=2786  rpm=102.77  state=3
21:48:25.717 ->   step=140.00  angle=141.00  dt=2815  rpm=101.90  state=3
21:48:25.811 ->   step=141.00  angle=142.00  dt=2836  rpm=101.04  state=3
21:48:25.857 ->   step=142.00  angle=143.00  dt=2865  rpm=100.17  state=3
21:48:25.903 ->   step=143.00  angle=144.00  dt=2887  rpm=99.27  state=3
21:48:25.996 ->   step=144.00  angle=145.00  dt=2918  rpm=98.36  state=3
21:48:26.042 ->   step=145.00  angle=146.00  dt=2942  rpm=97.47  state=3
21:48:26.089 ->   step=146.00  angle=147.00  dt=2966  rpm=96.56  state=3
21:48:26.136 ->   step=147.00  angle=148.00  dt=2999  rpm=95.63  state=3
21:48:26.227 ->   step=148.00  angle=149.00  dt=3029  rpm=94.70  state=3
21:48:26.274 ->   step=149.00  angle=150.00  dt=3064  rpm=93.75  state=3
21:48:26.321 ->   step=150.00  angle=151.00  dt=3096  rpm=92.79  state=3
21:48:26.414 ->   step=151.00  angle=152.00  dt=3129  rpm=91.83  state=3
21:48:26.461 ->   step=152.00  angle=153.00  dt=3163  rpm=90.85  state=3
21:48:26.508 ->   step=153.00  angle=154.00  dt=3198  rpm=89.87  state=3
21:48:26.600 ->   step=154.00  angle=155.00  dt=3230  rpm=88.89  state=3
21:48:26.647 ->   step=155.00  angle=156.00  dt=3267  rpm=87.90  state=3
21:48:26.694 ->   step=156.00  angle=157.00  dt=3305  rpm=86.88  state=3
21:48:26.741 ->   step=157.00  angle=158.00  dt=3341  rpm=85.84  state=3
21:48:26.833 ->   step=158.00  angle=159.00  dt=3387  rpm=84.79  state=3
21:48:26.880 ->   step=159.00  angle=160.00  dt=3430  rpm=83.73  state=3
21:48:26.974 ->   step=160.00  angle=161.00  dt=3475  rpm=82.67  state=3
21:48:26.974 ->   step=161.00  angle=162.00  dt=3525  rpm=81.59  state=3
21:48:27.067 ->   step=162.00  angle=163.00  dt=3569  rpm=80.49  state=3
21:48:27.114 ->   step=163.00  angle=164.00  dt=3619  rpm=79.39  state=3
21:48:27.206 ->   step=164.00  angle=165.00  dt=3671  rpm=78.27  state=3
21:48:27.252 ->   step=165.00  angle=166.00  dt=3725  rpm=77.12  state=3
21:48:27.298 ->   step=166.00  angle=167.00  dt=3782  rpm=75.97  state=3
21:48:27.345 ->   step=167.00  angle=168.00  dt=3837  rpm=74.79  state=3
21:48:27.424 ->   step=168.00  angle=169.00  dt=3899  rpm=73.60  state=3
21:48:27.470 ->   step=169.00  angle=170.00  dt=3972  rpm=72.38  state=3
21:48:27.563 ->   step=170.00  angle=171.00  dt=4041  rpm=71.14  state=3
21:48:27.608 ->   step=171.00  angle=172.00  dt=4109  rpm=69.88  state=3
21:48:27.657 ->   step=172.00  angle=173.00  dt=4185  rpm=68.60  state=3
21:48:27.702 ->   step=173.00  angle=174.00  dt=4265  rpm=67.29  state=3
21:48:27.794 ->   step=174.00  angle=175.00  dt=4350  rpm=65.96  state=3
21:48:27.840 ->   step=175.00  angle=176.00  dt=4444  rpm=64.60  state=3
21:48:27.932 ->   step=176.00  angle=177.00  dt=4540  rpm=63.21  state=3
21:48:27.932 ->   step=177.00  angle=178.00  dt=4638  rpm=61.79  state=3
21:48:28.027 ->   step=178.00  angle=179.00  dt=4743  rpm=60.34  state=3
21:48:28.072 ->   step=179.00  angle=180.00  dt=4864  rpm=58.86  state=3
21:48:28.160 ->   step=180.00  angle=181.00  dt=4989  rpm=57.34  state=3
21:48:28.206 ->   step=181.00  angle=182.00  dt=5124  rpm=55.77  state=3
21:48:28.252 ->   step=182.00  angle=183.00  dt=5271  rpm=54.16  state=3
21:48:28.299 ->   step=183.00  angle=184.00  dt=5431  rpm=52.49  state=3
21:48:28.393 ->   step=184.00  angle=185.00  dt=5607  rpm=50.77  state=3
21:48:28.439 ->   step=185.00  angle=186.00  dt=5805  rpm=48.99  state=3
21:48:28.532 ->   step=186.00  angle=187.00  dt=6016  rpm=47.14  state=3
21:48:28.578 ->   step=187.00  angle=188.00  dt=6256  rpm=45.21  state=3
21:48:28.623 ->   step=188.00  angle=189.00  dt=6527  rpm=43.20  state=3
21:48:28.670 ->   step=189.00  angle=190.00  dt=6832  rpm=41.10  state=3
21:48:28.763 ->   step=190.00  angle=191.00  dt=7196  rpm=38.88  state=3
21:48:28.811 ->   step=191.00  angle=192.00  dt=7609  rpm=36.52  state=3
21:48:28.903 ->   step=192.00  angle=193.00  dt=8107  rpm=34.00  state=3
21:48:28.903 ->   step=193.00  angle=194.00  dt=8720  rpm=31.28  state=3
21:48:28.996 ->   step=194.00  angle=195.00  dt=9487  rpm=28.30  state=3
21:48:29.043 ->   step=195.00  angle=196.00  dt=10492  rpm=24.97  state=3
21:48:29.135 ->   step=196.00  angle=197.00  dt=11905  rpm=21.13  state=3
21:48:29.182 ->   step=197.00  angle=198.00  dt=14094  rpm=16.43  state=3
21:48:29.275 ->   step=198.00  angle=199.00  dt=18147  rpm=9.86  state=3
21:48:29.275 ->   step=199.00  angle=200.00  dt=30410  rpm=9.86  state=0
21:48:29.360 -> END
